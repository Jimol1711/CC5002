<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Hincha</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        form {
            width: 80%;
            max-width: 500px;
            margin: auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
        }
    </style>
    <script>
        // Cargar los datos del archivo JSON
        fetch('comunas-regiones.json')
            .then(response => response.json())
            .then(data => {
                const regionSelect = document.getElementById("region");
                const comunaSelect = document.getElementById("comuna");
                const deporteSelect = document.getElementById("deporteSelect"); // Cambio aquí

                // Llena el menú desplegable de regiones
                const defaultRegionOption = document.createElement("option");
                defaultRegionOption.value = "";
                defaultRegionOption.textContent = "Seleccione una región";
                regionSelect.appendChild(defaultRegionOption);
                
                // Llena el menú desplegable de regiones
                for (const regionInfo of data.regiones) {
                    const option = document.createElement("option");
                    option.value = regionInfo.region;
                    option.textContent = regionInfo.region;
                    regionSelect.appendChild(option);
                }

                // Llena el menú desplegable de deportes
                const defaultDeporteOption = document.createElement("option");
                defaultDeporteOption.value = "";
                defaultDeporteOption.textContent = "Seleccione un deporte";
                deporteSelect.appendChild(defaultDeporteOption);

                // Llena el menú desplegable de deportes con opciones
                const deportes = [
                "Adiestramiento ecuestre",
                "Atletismo",
                "Bádminton",
                "Balonmano",
                "Básquetbol",
                "Básquetbol 3x3",
                "Béisbol",
                "BMX Freestyle",
                "BMX Racing",
                "Bowling",
                "Boxeo",
                "Breaking",
                "Canotaje de velocidad",
                "Canotaje Slalom",
                "Clavados",
                "Ciclismo pista",
                "Ciclismo ruta",
                "Clavados",
                "Escalada deportiva",
                "Esgrima",
                "Esquí acuático y Wakeboard",
                "Evento completo ecuestre",
                "Fútbol",
                "Gimnasia artística Femenina",
                "Gimnasia artística Masculina",
                "Gimnasia rítmica",
                "Gimnasia trampolín",
                "Golf",
                "Hockey césped",
                "Judo",
                "Karate",
                "Levantamiento de pesas",
                "Lucha",
                "Maratón",
                "Marcha",
                "Mountain Bike",
                "Natación",
                "Natación artística",
                "Natación en Aguas abiertas",
                "Patinaje artístico",
                "Patinaje velocidad",
                "Pelota vasca",
                "Pentatlón moderno",
                "Polo acuático",
                "Racquetball",
                "Remo",
                "Rugby 7",
                "Salto ecuestre",
                "Skateboarding",
                "Sofbol",
                "Squash",
                "Surf",
                "Taekwondo",
                "Tenis",
                "Tenis de mesa",
                "Tiro",
                "Tiro con arco",
                "Triatlón",
                "Vela",
                "Vóleibol",
                "Vóleibol playa"
                ]

                deportes.forEach(deporte => {
                    const option = document.createElement("option");
                    option.value = deporte;
                    option.textContent = deporte;
                    deporteSelect.appendChild(option);
                });

                // Función para actualizar las comunas basadas en la región seleccionada
                function updateComunas() {
                    const selectedRegion = regionSelect.value;
                    const selectedRegionInfo = data.regiones.find(regionInfo => regionInfo.region === selectedRegion);
                    comunaSelect.innerHTML = ""; // Limpiar opciones anteriores
                    const defaultComunaOption = document.createElement("option");
                    defaultComunaOption.value = "";
                    defaultComunaOption.textContent = "Seleccione una comuna";
                    comunaSelect.appendChild(defaultComunaOption);
                    selectedRegionInfo.comunas.forEach(comuna => {
                        const option = document.createElement("option");
                        option.value = comuna;
                        option.textContent = comuna;
                        comunaSelect.appendChild(option);
                    });
                }

                // Asignar la función de actualización al evento onchange
                regionSelect.addEventListener("change", updateComunas);
            })
            .catch(error => console.error("Error al cargar el archivo JSON:", error));
    </script>
</head>
<body>
    <form>
        <label for="deporte">Deporte el cual desea apoyar:</label>
        <select id="deporteSelect" name="deporte" required>
        </select>

        <label for="region">Región en donde vive:</label>
        <select id="region" name="region" onchange="updateComunas();" required>
        </select>

        <label for="comuna">Comuna donde vive:</label>
        <select id="comuna" name="comuna" required>
            <!-- Comunas will be populated based on the selected region using JavaScript -->
        </select>

        <button type="submit">Registrar Hincha</button>
    </form>
</body>
</html>
